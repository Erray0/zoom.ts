(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
!function t(e,n,o){function i(s,c){if(!n[s]){if(!e[s]){var d="function"==typeof require&&require;if(!c&&d)return d(s,!0);if(r)return r(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n?n:t)},l,l.exports,t,e,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(t,e,n){"use strict";var o=t("./element/ZoomedImageElement"),i=t("./element/ZoomedVideoElement"),r=t("./util/Attributes"),s=t("./util/Classes"),c=t("./util/Dimensions"),d=27,u=70,l=30,a=document.createElement("div");a.className=s.OVERLAY_CLASS;var m=function(){function t(){var t=this;this.scrollListener=function(){Math.abs(t._initialScrollY-c.Dimensions.scrollY())>=u&&t.close()},this.keyboardListener=function(e){e.keyCode===d&&t.close()},this.touchStartListener=function(e){t._initialTouchY=e.touches[0].pageY,e.target.addEventListener("touchmove",t.touchMoveListener)},this.touchMoveListener=function(e){Math.abs(e.touches[0].pageY-t._initialTouchY)>l&&(t.close(),e.target.removeEventListener("touchmove",t.touchMoveListener))}}return t.ready=function(t){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){t()}):t()},t.prototype.listen=function(){var e=this;t.ready(function(){document.body.addEventListener("click",function(t){var n=t.target;n.getAttribute(r.ZOOM_FUNCTION_KEY)===r.ZOOM_IN_VALUE?e.zoom(t):n.getAttribute(r.ZOOM_FUNCTION_KEY)===r.ZOOM_OUT_VALUE&&e.close()}),document.body.appendChild(a)})},t.prototype.zoom=function(t){t.stopPropagation();var e=document.body.classList;if(!e.contains(s.OVERLAY_OPEN_CLASS)&&!e.contains(s.OVERLAY_LOADING_CLASS)){var n=t.target;if(t.metaKey||t.ctrlKey){var d=n.getAttribute(r.FULL_SRC_KEY)||n.currentSrc||n.src;return void window.open(d,"_blank")}n.width>=window.innerWidth||("IMG"===n.tagName||"PICTURE"===n.tagName?this._current=new o.ZoomedImageElement(n):this._current=new i.ZoomedVideoElement(n),this._current.open(),this.addCloseListeners(),this._initialScrollY=c.Dimensions.scrollY())}},t.prototype.close=function(){this._current&&(this._current.close(),this.removeCloseListeners(),this._current=void 0)},t.prototype.addCloseListeners=function(){window.addEventListener("scroll",this.scrollListener),document.addEventListener("keyup",this.keyboardListener),document.addEventListener("touchstart",this.touchStartListener)},t.prototype.removeCloseListeners=function(){window.removeEventListener("scroll",this.scrollListener),document.removeEventListener("keyup",this.keyboardListener),document.removeEventListener("touchstart",this.touchStartListener)},t}();n.ZoomListener=m},{"./element/ZoomedImageElement":3,"./element/ZoomedVideoElement":4,"./util/Attributes":6,"./util/Classes":7,"./util/Dimensions":8}],2:[function(t,e,n){"use strict";var o=t("../util/Attributes"),i=t("../util/Classes"),r=t("../util/Dimensions"),s=t("../util/Style"),c=document.createElement("div");c.className=i.WRAP_CLASS;var d=function(){function t(t){var e=this;this.openedListener=function(){e.opened()},this.closedListener=function(){e.closed()},this._fullSrc=t.getAttribute(o.FULL_SRC_KEY)||t.currentSrc||t.src,this._element=t}return t.addTransitionEndListener=function(t,e){"transition"in document.body.style?(t.addEventListener("transitionend",e),t.addEventListener("webkitTransitionEnd",e)):e(void 0)},t.removeTransitionEndListener=function(t,e){t.removeEventListener("transitionend",e),t.removeEventListener("webkitTransitionEnd",e)},t.prototype.open=function(){document.body.classList.add(i.OVERLAY_LOADING_CLASS),this.zoomedIn(),this._element.src=this._fullSrc,t.addTransitionEndListener(this._element,this.openedListener)},t.prototype.close=function(){var e=document.body.classList;e.remove(i.OVERLAY_OPEN_CLASS),e.add(i.OVERLAY_TRANSITIONING_CLASS),s.Style.transform(this._element,""),s.Style.transform(c,""),t.addTransitionEndListener(this._element,this.closedListener)},t.prototype.loaded=function(t,e){var n=document.body.classList;n.remove(i.OVERLAY_LOADING_CLASS),n.add(i.OVERLAY_TRANSITIONING_CLASS),n.add(i.OVERLAY_OPEN_CLASS),this._element.parentNode.insertBefore(c,this._element),c.appendChild(this._element),this._element.setAttribute(o.ZOOM_FUNCTION_KEY,o.ZOOM_OUT_VALUE),this.scaleElement(t,e),this.translateWrap()},t.prototype.repaint=function(){this._element.offsetWidth},t.prototype.scaleElement=function(t,e){this.repaint();var n,o=r.Dimensions.viewportWidth(),i=r.Dimensions.viewportHeight(),c=o/i,d=t/this.width(),u=t/e;n=t<o&&e<i?d:u<c?i/e*d:o/t*d,s.Style.transform(this._element,"scale("+n+")")},t.prototype.translateWrap=function(){this.repaint();var t=r.Dimensions.scrollX(),e=r.Dimensions.scrollY(),n=r.Dimensions.viewportWidth(),o=r.Dimensions.viewportHeight(),i=n/2,d=e+o/2,u=this._element,l=u.getBoundingClientRect(),a=l.left+t+(u.width||u.offsetWidth)/2,m=l.top+e+(u.height||u.offsetHeight)/2,h=Math.round(i-a),_=Math.round(d-m);s.Style.transform(c,"translate("+h+"px, "+_+"px) translateZ(0)")},t.prototype.opened=function(){t.removeTransitionEndListener(this._element,this.openedListener),document.body.classList.remove(i.OVERLAY_TRANSITIONING_CLASS)},t.prototype.closed=function(){t.removeTransitionEndListener(this._element,this.closedListener),c.parentNode&&(this._element.setAttribute(o.ZOOM_FUNCTION_KEY,o.ZOOM_IN_VALUE),c.parentNode.replaceChild(this._element,c),document.body.classList.remove(i.OVERLAY_TRANSITIONING_CLASS),this.disposed())},t}();n.ZoomedElement=d},{"../util/Attributes":6,"../util/Classes":7,"../util/Dimensions":8,"../util/Style":9}],3:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("../util/Attributes"),r=t("./ZoomedElement"),s=function(t){function e(e){t.call(this,e),this._image=e}return o(e,t),e.prototype.zoomedIn=function(){var t=this,e=document.createElement("img");e.onload=function(){t.loaded(e.width,e.height),t._image.removeAttribute(i.FULL_SRC_KEY)},e.src=this._fullSrc},e.prototype.disposed=function(){},e.prototype.width=function(){return this._image.width},e}(r.ZoomedElement);n.ZoomedImageElement=s},{"../util/Attributes":6,"./ZoomedElement":2}],4:[function(t,e,n){"use strict";var o=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},i=t("../util/Attributes"),r=t("./ZoomedElement"),s=function(t){function e(e){t.call(this,e),this._video=e}return o(e,t),e.prototype.zoomedIn=function(){var t=this,e=document.createElement("video"),n=document.createElement("source");e.appendChild(n),e.addEventListener("canplay",function(){t.loaded(e.videoWidth,e.videoHeight),t._video.play()}),n.src=this._fullSrc},e.prototype.disposed=function(){this._video.getAttribute(i.PLAY_VIDEO_KEY)===i.ALWAYS_PLAY_VIDEO_VALUE&&this._video.play()},e.prototype.width=function(){return this._video.width||this._video.videoWidth},e}(r.ZoomedElement);n.ZoomedVideoElement=s},{"../util/Attributes":6,"./ZoomedElement":2}],5:[function(t,e,n){"use strict";var o=t("./ZoomListener");(new o.ZoomListener).listen()},{"./ZoomListener":1}],6:[function(t,e,n){"use strict";n.ZOOM_FUNCTION_KEY="data-zoom",n.ZOOM_IN_VALUE="zoom-in",n.ZOOM_OUT_VALUE="zoom-out",n.FULL_SRC_KEY="data-zoom-src",n.PLAY_VIDEO_KEY="data-zoom-play",n.ALWAYS_PLAY_VIDEO_VALUE="always"},{}],7:[function(t,e,n){"use strict";n.OVERLAY_CLASS="zoom-overlay",n.OVERLAY_OPEN_CLASS="zoom-overlay-open",n.OVERLAY_LOADING_CLASS="zoom-overlay-loading",n.OVERLAY_TRANSITIONING_CLASS="zoom-overlay-transitioning",n.WRAP_CLASS="zoom-wrap"},{}],8:[function(t,e,n){"use strict";var o=function(){function t(){}return t.scrollX=function(){return window.pageXOffset||document.body.scrollLeft||0},t.scrollY=function(){return window.pageYOffset||document.body.scrollTop||0},t.viewportWidth=function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0},t}();n.Dimensions=o},{}],9:[function(t,e,n){"use strict";var o=function(){function t(){}return t.transform=function(t,e){t.style.webkitTransform=e,t.style.transform=e},t}();n.Style=o},{}]},{},[5]);
},{}]},{},[1])

