(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
!function t(e,o,i){function n(r,a){if(!o[r]){if(!e[r]){var c="function"==typeof require&&require;if(!a&&c)return c(r,!0);if(s)return s(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var h=o[r]={exports:{}};e[r][0].call(h.exports,function(t){var o=e[r][1][t];return n(o?o:t)},h,h.exports,t,e,o,i)}return o[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)n(i[r]);return n}({1:[function(t,e,o){"use strict";o.ZOOM_FUNCTION_KEY="data-zoom",o.ZOOM_IN_VALUE="zoom-in",o.ZOOM_OUT_VALUE="zoom-out",o.FULL_SRC_KEY="data-zoom-src",o.PLAY_VIDEO_KEY="data-zoom-play",o.ALWAYS_PLAY_VIDEO_VALUE="always"},{}],2:[function(t,e,o){"use strict";o.OVERLAY_CLASS="zoom-overlay",o.OVERLAY_OPEN_CLASS="zoom-overlay-open",o.OVERLAY_TRANSITIONING_CLASS="zoom-overlay-transitioning",o.ZOOMED_CLASS="zoom-media",o.WRAP_CLASS="zoom-media-wrap"},{}],3:[function(t,e,o){"use strict";var i="data-offset-memo-key",n=function(){function t(t,e){this._top=t,this._left=e}return t.of=function(e){if(!e.offsetParent)return t.origin;var o=e.getAttribute(i);if(o)return t.cache[o];do o=String(Math.random());while(t.cache[o]);e.setAttribute(i,o),t.cache[o]=new t(0,0);var n=e;do{var s=t.cache[o];s._top+=n.offsetTop,s._left+=n.offsetLeft,n=n.offsetParent}while(n);return t.cache[o]},t.origin=new t(0,0),t.cache={},t}();o.Position=n},{}],4:[function(t,e,o){"use strict";var i=t("./Attributes"),n=t("./Classes"),s=t("./ZoomedImageElement"),r=t("./ZoomedVideoElement"),a=27,c=70,l=30,h=function(){function t(){var t=this;this.scrollListener=function(){Math.abs(t._initialScrollPosition-window.scrollY)>=c&&t.close()},this.clickListener=function(e){e.stopPropagation(),e.preventDefault(),t.close()},this.keyboardListener=function(e){e.keyCode===a&&t.close()},this.touchStartListener=function(e){t._initialTouchPosition=e.touches[0].pageY,e.target.addEventListener("touchmove",t.touchMoveListener)},this.touchMoveListener=function(e){Math.abs(e.touches[0].pageY-t._initialTouchPosition)>l&&(t.close(),e.target.removeEventListener("touchmove",t.touchMoveListener))}}return t.prototype.listen=function(){var t=this;document.body.addEventListener("click",function(e){var o=e.target;o.getAttribute(i.ZOOM_FUNCTION_KEY)===i.ZOOM_IN_VALUE&&t.zoom(e)})},t.prototype.zoom=function(t){if(t.stopPropagation(),!document.body.classList.contains(n.OVERLAY_OPEN_CLASS)){var e=t.target;if(t.metaKey||t.ctrlKey){var o=e.getAttribute(i.FULL_SRC_KEY)||e.currentSrc||e.src;return void window.open(o,"_blank")}e.width>=window.innerWidth||(this.dispose(),"IMG"===e.tagName||"PICTURE"===e.tagName?this._current=new s.ZoomedImageElement(e):this._current=new r.ZoomedVideoElement(e),this._current.zoom(),this.addCloseListeners(),this._initialScrollPosition=window.scrollY)}},t.prototype.close=function(){this._current&&(this._current.close(),this.removeCloseListeners(),this._current=void 0)},t.prototype.dispose=function(){this._current&&(this._current.dispose(),this.removeCloseListeners(),this._current=void 0)},t.prototype.addCloseListeners=function(){window.addEventListener("scroll",this.scrollListener),document.addEventListener("click",this.clickListener),document.addEventListener("keyup",this.keyboardListener),document.addEventListener("touchstart",this.touchStartListener)},t.prototype.removeCloseListeners=function(){window.removeEventListener("scroll",this.scrollListener),document.removeEventListener("click",this.clickListener),document.removeEventListener("keyup",this.keyboardListener),document.removeEventListener("touchstart",this.touchStartListener)},t}();o.ZoomListener=h},{"./Attributes":1,"./Classes":2,"./ZoomedImageElement":6,"./ZoomedVideoElement":7}],5:[function(t,e,o){"use strict";var i=t("./Attributes"),n=t("./Classes"),s=t("./Position"),r=function(){function t(t){var e=this;this.disposeListener=function(){e.dispose()},this._element=t,this._fullSrc=t.getAttribute(i.FULL_SRC_KEY)||t.currentSrc||t.src}return t.transformStyle=function(t,e){t.style.webkitTransform=e,t.style.transform=e},t.prototype.zoom=function(){this.zoomedIn(),this._element.src=this._fullSrc},t.prototype.close=function(){if(document.body.classList.remove(n.OVERLAY_OPEN_CLASS),document.body.classList.add(n.OVERLAY_TRANSITIONING_CLASS),t.transformStyle(this._element,""),t.transformStyle(this._wrap,""),"transition"in document.body.style){var e=this._element;e.addEventListener("transitionend",this.disposeListener),e.addEventListener("webkitTransitionEnd",this.disposeListener)}else this.dispose()},t.prototype.dispose=function(){this._element.removeEventListener("transitioned",this.disposeListener),this._element.removeEventListener("webkitTransitionEnd",this.disposeListener),this._wrap&&this._wrap.parentNode&&(this.zoomOutElement(),this._clone.parentNode.replaceChild(this._element,this._clone),this._wrap.parentNode.removeChild(this._wrap),this._overlay.parentNode.removeChild(this._overlay),document.body.classList.remove(n.OVERLAY_TRANSITIONING_CLASS),this.disposed())},t.prototype.zoomOriginal=function(t,e){this.createWrap(),this.createHiddenClone(),this.zoomInElement(),this._element.parentNode.replaceChild(this._clone,this._element),this._wrap.appendChild(this._element),this.createOverlay(),document.body.appendChild(this._wrap),document.body.appendChild(this._overlay),this.scale(t,e),this.translate(),document.body.classList.add(n.OVERLAY_OPEN_CLASS)},t.prototype.createWrap=function(){this._wrap=document.createElement("div"),this._wrap.className=n.WRAP_CLASS,this._wrap.style.position="absolute";var t=s.Position.of(this._element);this._wrap.style.top=t._top+"px",this._wrap.style.left=t._left+"px"},t.prototype.createHiddenClone=function(){this._clone=this._element.cloneNode(),this._clone.style.visibility="hidden"},t.prototype.createOverlay=function(){this._overlay=document.createElement("div"),this._overlay.className=n.OVERLAY_CLASS},t.prototype.zoomInElement=function(){this._element.style.width=this._element.offsetWidth+"px",this._element.classList.add(n.ZOOMED_CLASS),this._element.setAttribute(i.ZOOM_FUNCTION_KEY,i.ZOOM_OUT_VALUE)},t.prototype.zoomOutElement=function(){this._element.style.width="",this._element.classList.remove(n.ZOOMED_CLASS),this._element.setAttribute(i.ZOOM_FUNCTION_KEY,i.ZOOM_IN_VALUE)},t.prototype.repaint=function(){this._element.offsetWidth},t.prototype.scale=function(e,o){this.repaint();var i,n=e/this.width(),s=e/o,r=window.innerWidth,a=window.innerHeight,c=r/a;i=e<r&&o<a?n:s<c?a/o*n:r/e*n,t.transformStyle(this._element,"scale("+i+")")},t.prototype.translate=function(){this.repaint();var e=window.innerWidth/2,o=window.scrollY+window.innerHeight/2,i=s.Position.of(this._element),n=i._left+(this._element.width||this._element.offsetWidth)/2,r=i._top+(this._element.height||this._element.offsetHeight)/2,a=Math.round(e-n),c=Math.round(o-r);t.transformStyle(this._wrap,"translate("+a+"px, "+c+"px) translateZ(0)")},t}();o.ZoomedElement=r},{"./Attributes":1,"./Classes":2,"./Position":3}],6:[function(t,e,o){"use strict";var i=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},n=t("./Attributes"),s=t("./ZoomedElement"),r=function(t){function e(){t.apply(this,arguments)}return i(e,t),e.prototype.zoomedIn=function(){var t=this,e=document.createElement("img");e.onload=function(){t.zoomOriginal(e.width,e.height),t._element.removeAttribute(n.FULL_SRC_KEY)},e.src=this._fullSrc},e.prototype.disposed=function(){},e.prototype.width=function(){return this._element.width},e}(s.ZoomedElement);o.ZoomedImageElement=r},{"./Attributes":1,"./ZoomedElement":5}],7:[function(t,e,o){"use strict";var i=this&&this.__extends||function(t,e){function o(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)},n=t("./Attributes"),s=t("./ZoomedElement"),r=function(t){function e(){t.apply(this,arguments)}return i(e,t),e.prototype.zoomedIn=function(){var t=this,e=document.createElement("video"),o=document.createElement("source");e.appendChild(o),e.addEventListener("canplay",function(){t.zoomOriginal(e.videoWidth,e.videoHeight),t._element.play()}),o.src=this._fullSrc},e.prototype.disposed=function(){var t=this._element;this._element.getAttribute(n.PLAY_VIDEO_KEY)===n.ALWAYS_PLAY_VIDEO_VALUE&&t.play()},e.prototype.width=function(){return this._element.width||this._element.videoWidth},e}(s.ZoomedElement);o.ZoomedVideoElement=r},{"./Attributes":1,"./ZoomedElement":5}],8:[function(t,e,o){"use strict";var i=t("./ZoomListener");(new i.ZoomListener).listen()},{"./ZoomListener":4}]},{},[8]);
},{}]},{},[1])

