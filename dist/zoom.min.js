(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
!function e(t,n,o){function i(s,d){if(!n[s]){if(!t[s]){var c="function"==typeof require&&require;if(!d&&c)return c(s,!0);if(r)return r(s,!0);var a=new Error("Cannot find module '"+s+"'");throw a.code="MODULE_NOT_FOUND",a}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return i(n?n:e)},l,l.exports,e,t,n,o)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<o.length;s++)i(o[s]);return i}({1:[function(e,t,n){"use strict";n.ZOOM_FUNCTION_KEY="data-zoom",n.ZOOM_IN_VALUE="zoom-in",n.ZOOM_OUT_VALUE="zoom-out",n.POSITION_MEMO_KEY="data-zoom-offset-key",n.FULL_SRC_KEY="data-zoom-src",n.PLAY_VIDEO_KEY="data-zoom-play",n.ALWAYS_PLAY_VIDEO_VALUE="always"},{}],2:[function(e,t,n){"use strict";n.OVERLAY_CLASS="zoom-overlay",n.OVERLAY_OPEN_CLASS="zoom-overlay-open",n.OVERLAY_LOADING_CLASS="zoom-overlay-loading",n.OVERLAY_TRANSITIONING_CLASS="zoom-overlay-transitioning",n.WRAP_CLASS="zoom-wrap"},{}],3:[function(e,t,n){"use strict";var o=e("./Attributes"),i=e("./Classes"),r=e("./ZoomedImageElement"),s=e("./ZoomedVideoElement"),d=27,c=70,a=30,l=function(){function e(){var e=this;this.scrollListener=function(){Math.abs(e._initialScrollPosition-window.scrollY)>=c&&e.close()},this.keyboardListener=function(t){t.keyCode===d&&e.close()},this.touchStartListener=function(t){e._initialTouchPosition=t.touches[0].pageY,t.target.addEventListener("touchmove",e.touchMoveListener)},this.touchMoveListener=function(t){Math.abs(t.touches[0].pageY-e._initialTouchPosition)>a&&(e.close(),t.target.removeEventListener("touchmove",e.touchMoveListener))}}return e.ready=function(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){e()}):e()},e.prototype.listen=function(){var t=this;e.ready(function(){document.body.addEventListener("click",function(e){var n=e.target;n.getAttribute(o.ZOOM_FUNCTION_KEY)===o.ZOOM_IN_VALUE?t.zoom(e):n.getAttribute(o.ZOOM_FUNCTION_KEY)===o.ZOOM_OUT_VALUE&&t.close()});var e=document.createElement("div");e.className=i.OVERLAY_CLASS,document.body.appendChild(e)})},e.prototype.zoom=function(e){e.stopPropagation();var t=document.body.classList;if(!t.contains(i.OVERLAY_OPEN_CLASS)&&!t.contains(i.OVERLAY_LOADING_CLASS)){var n=e.target;if(e.metaKey||e.ctrlKey){var d=n.getAttribute(o.FULL_SRC_KEY)||n.currentSrc||n.src;return void window.open(d,"_blank")}n.width>=window.innerWidth||("IMG"===n.tagName||"PICTURE"===n.tagName?this._current=new r.ZoomedImageElement(n):this._current=new s.ZoomedVideoElement(n),this._current.open(),this.addCloseListeners(),this._initialScrollPosition=window.scrollY)}},e.prototype.close=function(){this._current&&(this._current.close(),this.removeCloseListeners(),this._current=void 0)},e.prototype.addCloseListeners=function(){window.addEventListener("scroll",this.scrollListener),document.addEventListener("keyup",this.keyboardListener),document.addEventListener("touchstart",this.touchStartListener)},e.prototype.removeCloseListeners=function(){window.removeEventListener("scroll",this.scrollListener),document.removeEventListener("keyup",this.keyboardListener),document.removeEventListener("touchstart",this.touchStartListener)},e}();n.ZoomListener=l},{"./Attributes":1,"./Classes":2,"./ZoomedImageElement":5,"./ZoomedVideoElement":6}],4:[function(e,t,n){"use strict";var o=e("./Attributes"),i=e("./Classes"),r=function(){function e(e){var t=this;this.openedListener=function(){t.opened()},this.closedListener=function(){t.closed()},this._element=e,this._fullSrc=e.getAttribute(o.FULL_SRC_KEY)||e.currentSrc||e.src}return e.transformStyle=function(e,t){e.style.webkitTransform=t,e.style.transform=t},e.prototype.open=function(){if(document.body.classList.add(i.OVERLAY_LOADING_CLASS),this.zoomedIn(),this._element.src=this._fullSrc,"transition"in document.body.style){var e=this._element;e.addEventListener("transitionend",this.openedListener),e.addEventListener("webkitTransitionEnd",this.openedListener)}else this.opened()},e.prototype.close=function(){if(document.body.classList.remove(i.OVERLAY_OPEN_CLASS),document.body.classList.add(i.OVERLAY_TRANSITIONING_CLASS),e.transformStyle(this._element,""),e.transformStyle(this._wrap,""),"transition"in document.body.style){var t=this._element;t.addEventListener("transitionend",this.closedListener),t.addEventListener("webkitTransitionEnd",this.closedListener)}else this.closed()},e.prototype.loaded=function(e,t){document.body.classList.remove(i.OVERLAY_LOADING_CLASS),document.body.classList.add(i.OVERLAY_TRANSITIONING_CLASS),document.body.classList.add(i.OVERLAY_OPEN_CLASS),this._wrap=document.createElement("div"),this._wrap.className=i.WRAP_CLASS,this._element.parentNode.insertBefore(this._wrap,this._element),this._wrap.appendChild(this._element),this._element.setAttribute(o.ZOOM_FUNCTION_KEY,o.ZOOM_OUT_VALUE),this.scale(e,t),this.translate()},e.prototype.repaint=function(){this._element.offsetWidth},e.prototype.scale=function(t,n){this.repaint();var o,i=t/this.width(),r=window.innerWidth||document.documentElement.clientWidth||0,s=window.innerHeight||document.documentElement.clientHeight||0,d=t/n,c=r/s;o=t<r&&n<s?i:d<c?s/n*i:r/t*i,e.transformStyle(this._element,"scale("+o+")")},e.prototype.translate=function(){this.repaint();var t=window.pageYOffset||document.documentElement.scrollTop||0,n=window.pageXOffset||document.documentElement.scrollLeft||0,o=window.innerWidth||document.documentElement.clientWidth||0,i=window.innerHeight||document.documentElement.clientHeight||0,r=o/2,s=t+i/2,d=this._element.getBoundingClientRect(),c=d.left+n+this._element.width/2,a=d.top+t+this._element.height/2,l=Math.round(r-c),u=Math.round(s-a);e.transformStyle(this._wrap,"translate("+l+"px, "+u+"px) translateZ(0)")},e.prototype.opened=function(){this._element.removeEventListener("transitionend",this.openedListener),this._element.removeEventListener("webkitTransitionEnd",this.openedListener),document.body.classList.remove(i.OVERLAY_TRANSITIONING_CLASS)},e.prototype.closed=function(){this._element.removeEventListener("transitionend",this.closedListener),this._element.removeEventListener("webkitTransitionEnd",this.closedListener),this._wrap&&this._wrap.parentNode&&(this._element.setAttribute(o.ZOOM_FUNCTION_KEY,o.ZOOM_IN_VALUE),this._wrap.parentNode.replaceChild(this._element,this._wrap),document.body.classList.remove(i.OVERLAY_TRANSITIONING_CLASS),this.disposed())},e}();n.ZoomedElement=r},{"./Attributes":1,"./Classes":2}],5:[function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("./Attributes"),r=e("./ZoomedElement"),s=function(e){function t(){e.apply(this,arguments)}return o(t,e),t.prototype.zoomedIn=function(){var e=this,t=document.createElement("img");t.onload=function(){e.loaded(t.width,t.height),e._element.removeAttribute(i.FULL_SRC_KEY)},t.src=this._fullSrc},t.prototype.disposed=function(){},t.prototype.width=function(){return this._element.width},t}(r.ZoomedElement);n.ZoomedImageElement=s},{"./Attributes":1,"./ZoomedElement":4}],6:[function(e,t,n){"use strict";var o=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=e("./Attributes"),r=e("./ZoomedElement"),s=function(e){function t(){e.apply(this,arguments)}return o(t,e),t.prototype.zoomedIn=function(){var e=this,t=document.createElement("video"),n=document.createElement("source");t.appendChild(n),t.addEventListener("canplay",function(){e.loaded(t.videoWidth,t.videoHeight),e._element.play()}),n.src=this._fullSrc},t.prototype.disposed=function(){var e=this._element;this._element.getAttribute(i.PLAY_VIDEO_KEY)===i.ALWAYS_PLAY_VIDEO_VALUE&&e.play()},t.prototype.width=function(){return this._element.width||this._element.videoWidth},t}(r.ZoomedElement);n.ZoomedVideoElement=s},{"./Attributes":1,"./ZoomedElement":4}],7:[function(e,t,n){"use strict";var o=e("./ZoomListener");(new o.ZoomListener).listen()},{"./ZoomListener":3}]},{},[7]);
},{}]},{},[1])

